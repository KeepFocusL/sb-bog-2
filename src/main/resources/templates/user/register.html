<div th:replace="~{ app :: layout ('用户注册', _, ~{::#main}, _) }" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
    <div id="main" class="container my-2rem">
        <form action="" th:action="@{/user/register}" method="post" th:object="${user}">
            <div class="form-group">
                <label for="email">邮箱</label>
                <input id="email" placeholder="邮箱" type="text" name="email" th:if="${#fields.hasErrors('email')? 'is - invalid' : ''}" value="" required autofocus oninput="fillUsernameFromEmail">
                <span th:if="${#fields.hasErrors('email')}" class="error invalid-feedback" th:errors="*{email}"></span>
            </div>
            <input id="name" placeholder="用户名" type="text" name="password" required>
            <input id="password" placeholder="密码" type="password" name="password" required>

            <button type="submit">注册</button>
        </form>
    </div>

    <script id="js">
        function fillUsernameFromEmail() {
            let emailInput = document.getElementById('email');
            let nameInput = document.getElementById('name');

            let emailValue = emailInput.value;
            let userName = emailValue.split("@")[0];
            nameInput.value = userName;
        }
    </script>
</div>